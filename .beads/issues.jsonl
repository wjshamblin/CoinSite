{"id":"CoinSite-0dl","title":"Add /admin/settings page with password reset via email","description":"Create an admin settings page at /admin/settings that allows administrators to:\n1. Request a password reset link sent to their registered email address\n2. View/update their email address\n3. Change password (when logged in)\n\nThis requires:\n- Email service integration (e.g., Resend, SendGrid, or similar)\n- Password reset token generation and storage\n- Reset token expiration handling\n- Secure password update flow","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T10:21:34.921601-05:00","updated_at":"2025-12-20T11:16:29.245817-05:00","closed_at":"2025-12-20T11:16:29.245817-05:00","close_reason":"Closed"}
{"id":"CoinSite-0z9","title":"Implement Vercel Blob for image storage","description":"Current image upload writes to filesystem which fails on Vercel (read-only serverless).\n\nNeed to migrate to Vercel Blob storage:\n- Update /admin/api/upload.ts to use @vercel/blob\n- Update image deletion to use blob.del()\n- Update image URLs to use blob URLs instead of /images/...\n- Migrate existing images from public/images/ to Blob storage\n\nVercel Blob free tier includes:\n- 1 GB storage\n- 10 GB data transfer\n- 10,000 simple operations\n- 2,000 advanced operations (uploads)\n\nReferences:\n- https://vercel.com/docs/vercel-blob\n- https://vercel.com/docs/vercel-blob/usage-and-pricing","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-21T09:07:04.529876-05:00","updated_at":"2025-12-21T09:25:19.184097-05:00","closed_at":"2025-12-21T09:25:19.184097-05:00","close_reason":"Implemented Vercel Blob storage - commit 0621ab1"}
{"id":"CoinSite-1hx","title":"Set up proper logging system","description":"All error handling currently uses `console.error`. Errors are lost in production.\n\n**Issues:**\n- No structured logging\n- No log levels (debug, info, warn, error)\n- No log aggregation capability\n- Errors not persisted\n\n**Recommended solution:**\n- Use Pino for structured JSON logging\n- Configure log levels per environment\n- Add request ID tracking\n- Consider log shipping to external service\n\n**Files using console.error:**\n- src/lib/auth.ts (lines 40, 97, 104, 114)","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T08:31:32.790156-05:00","updated_at":"2025-12-20T11:13:20.613284-05:00","closed_at":"2025-12-20T11:13:20.613284-05:00","close_reason":"Added structured logging with log levels and module-specific loggers","labels":["infrastructure"]}
{"id":"CoinSite-1j0","title":"Update collections description text","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T05:45:40.033252-05:00","created_by":"wjs","updated_at":"2026-01-03T05:45:40.033252-05:00"}
{"id":"CoinSite-1uu","title":"Add inline image upload to create coin/collection pages","description":"Add image upload functionality directly on the create pages:\n1. Add file upload field to /admin/collections/new\n2. Add file upload field to /admin/coins/new\n3. Upload image to Vercel Blob on form submission\n4. Associate the uploaded image with the newly created record\n5. Show upload preview before submission\n\nDepends on: Migration script completion","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T09:25:01.480523-05:00","updated_at":"2025-12-21T10:00:28.664737-05:00","closed_at":"2025-12-21T10:00:28.664737-05:00","close_reason":"Inline image upload implemented for create pages","dependencies":[{"issue_id":"CoinSite-1uu","depends_on_id":"CoinSite-gp8","type":"blocks","created_at":"2025-12-21T09:25:13.773446-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CoinSite-2kt","title":"Fix blog date parsing for database timestamp strings","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T07:18:14.3159-05:00","updated_at":"2025-12-21T07:18:24.668606-05:00","closed_at":"2025-12-21T07:18:24.668606-05:00","close_reason":"Fixed: Added robust parseDate() functions that handle timestamp strings stored as numbers in the database across blog index, blog post, and admin pages."}
{"id":"CoinSite-3tf","title":"Fix coins and images delete functionality","description":"Same issue as collections delete: missing API endpoints and script tag issues.\n\nFixes:\n- Added is:inline to coins/index.astro script\n- Created /admin/api/coins/[id].ts for coin deletion (cascades to images)\n- Created /admin/api/images/[type]/[filename].ts for direct image deletion","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T09:02:41.415142-05:00","updated_at":"2025-12-21T09:04:48.138342-05:00","closed_at":"2025-12-21T09:04:48.138342-05:00","close_reason":"Fixed - commit 09b44ef"}
{"id":"CoinSite-3v2","title":"Add drag-and-drop reordering for coins in collection","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-03T05:45:40.49119-05:00","created_by":"wjs","updated_at":"2026-01-03T05:45:40.49119-05:00"}
{"id":"CoinSite-4gp","title":"Add Secure flag to session cookies","description":"Session cookies in src/lib/auth.ts:130 are missing the Secure flag. This makes them vulnerable to man-in-the-middle attacks when transmitted over HTTP.\n\n**Current:**\n```typescript\nreturn `admin_session=${sessionToken}; Path=/; HttpOnly; SameSite=Strict; Expires=${expires.toUTCString()}`;\n```\n\n**Fix:**\n```typescript\nreturn `admin_session=${sessionToken}; Path=/; HttpOnly; Secure; SameSite=Strict; Expires=${expires.toUTCString()}`;\n```\n\nThe Secure flag ensures cookies are only sent over HTTPS connections.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T08:29:36.265146-05:00","updated_at":"2025-12-20T10:50:33.768795-05:00","closed_at":"2025-12-20T10:50:33.768795-05:00","close_reason":"Added Secure flag to session and logout cookies","labels":["critical","security"]}
{"id":"CoinSite-4k2","title":"Remove hardcoded demo credentials from login page","description":"The admin login page (src/pages/admin/login.astro:205-209) displays hardcoded demo credentials (admin/admin123) in the UI. This is a security risk for production.\n\n**Issues:**\n- Demo credentials visible to all users\n- Default password 'admin123' is also hardcoded in create-admin.ts\n\n**Fix:**\n1. Remove the demo-info div from login.astro\n2. Use environment variables for initial admin setup\n3. Force password change on first login","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T08:29:40.590569-05:00","updated_at":"2025-12-20T09:57:14.8609-05:00","closed_at":"2025-12-20T09:57:14.8609-05:00","close_reason":"Removed demo credentials from login page","labels":["critical","security"]}
{"id":"CoinSite-8sj","title":"Main page title: Lord Marcovan Coin Collections","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T05:45:38.956391-05:00","created_by":"wjs","updated_at":"2026-01-03T05:45:38.956391-05:00"}
{"id":"CoinSite-9z1","title":"Fix missing image on about page","description":"The about page had an image that is now missing. Need to restore it.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T11:21:04.651787-05:00","updated_at":"2025-12-21T11:21:50.17744-05:00","closed_at":"2025-12-21T11:21:50.17744-05:00","close_reason":"Fixed heroImage prop - needed to pass .src property of imported image instead of the ImageMetadata object."}
{"id":"CoinSite-9z6","title":"Add CSRF tokens to forms","description":"Forms lack CSRF (Cross-Site Request Forgery) protection. Attackers could trick authenticated users into performing unwanted actions.\n\n**Vulnerable forms:**\n- /admin/login (POST)\n- /admin/coins/new (POST)\n- /admin/collections/new (POST)\n- /admin/blog/new (POST)\n- All edit forms\n\n**Implementation:**\n1. Generate CSRF token on page load\n2. Include token in hidden form field\n3. Validate token on form submission\n4. Regenerate token after successful submission\n\nConsider using a library like csrf-csrf or implementing custom middleware.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-20T08:32:24.376014-05:00","updated_at":"2025-12-20T11:04:44.54516-05:00","closed_at":"2025-12-20T11:04:44.54516-05:00","close_reason":"Added CSRF protection to all admin forms","labels":["security"]}
{"id":"CoinSite-ak9","title":"Add comprehensive test suite","description":"The project has zero test coverage. Critical for authentication system reliability.\n\n**Test types needed:**\n1. **Unit tests** - Auth functions (verifyPassword, createSession, etc.)\n2. **Integration tests** - Database operations, API endpoints\n3. **E2E tests** - Login flow, admin CRUD operations\n\n**Recommended tools:**\n- Vitest for unit/integration tests\n- Playwright for E2E tests\n\n**Priority test targets:**\n- src/lib/auth.ts - All authentication functions\n- src/pages/admin/api/* - API endpoints\n- Session management flows","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T08:31:29.8847-05:00","updated_at":"2025-12-20T11:11:36.065044-05:00","closed_at":"2025-12-20T11:11:36.065044-05:00","close_reason":"Added Vitest with 18 tests for CSRF and rate limiting","labels":["testing"]}
{"id":"CoinSite-ccb","title":"Change color scheme to neutral greys palette","status":"open","priority":2,"issue_type":"feature","created_at":"2026-01-03T05:45:41.410118-05:00","created_by":"wjs","updated_at":"2026-01-03T05:45:41.410118-05:00"}
{"id":"CoinSite-coq","title":"Make static pages editable via database","description":"Add landing page and about page content to the database so they can be edited through the admin panel.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T11:21:04.972781-05:00","updated_at":"2025-12-21T11:27:07.886439-05:00","closed_at":"2025-12-21T11:27:07.886439-05:00","close_reason":"Added Pages table to database. Created admin UI for editing pages at /admin/pages. Updated about page to pull content from database. Landing page update deferred to future work."}
{"id":"CoinSite-dk2","title":"Fix BlogPost layout for database-driven content","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T07:18:14.616921-05:00","updated_at":"2025-12-21T07:18:24.972272-05:00","closed_at":"2025-12-21T07:18:24.972272-05:00","close_reason":"Fixed: Replaced Astro Image component with regular img tag since database stores image paths as strings, not imported assets."}
{"id":"CoinSite-ehp","title":"Fix Vercel deployment to use remote Turso database","description":"The site was returning 500 errors on Vercel because:\n\n1. The build script in package.json hardcoded `ASTRO_DATABASE_FILE=./db.sqlite`\n2. This forced local SQLite even when Turso env vars were set\n3. At runtime, Vercel tried to open /var/task/db.sqlite which doesn't exist\n\n**Root cause:** Conflict between global 'astro' command (Astronomer CLI) and npx astro (Astro framework)\n\n**Fix:**\n- Changed build script from `ASTRO_DATABASE_FILE=./db.sqlite astro build` to `astro build`\n- Added `build:local` script for local development with SQLite\n- Set up Turso database with ASTRO_DB_REMOTE_URL and ASTRO_DB_APP_TOKEN in Vercel\n- Pushed schema and seeded remote database\n\n**Files changed:**\n- package.json\n- .env (local, not committed)","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T09:13:08.367412-05:00","updated_at":"2025-12-20T09:13:34.329887-05:00","closed_at":"2025-12-20T09:13:34.329887-05:00","close_reason":"Fixed by updating package.json build script and configuring Turso","labels":["deployment","infrastructure"]}
{"id":"CoinSite-en7","title":"Add image picker for collection thumbnails and coin images","description":"Create an image picker component that:\n1. Shows all available images from Vercel Blob storage\n2. Allows selecting an image to associate with a collection (thumbnail) or coin (primaryImage)\n3. Updates the database with the selected image URL\n4. Works on the edit pages for both collections and coins\n5. Shows preview of currently selected image\n\nShould integrate with the existing admin edit pages.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T09:25:01.149833-05:00","updated_at":"2025-12-21T09:54:55.241235-05:00","closed_at":"2025-12-21T09:54:55.241235-05:00","close_reason":"Image picker implemented and deployed","dependencies":[{"issue_id":"CoinSite-en7","depends_on_id":"CoinSite-gp8","type":"blocks","created_at":"2025-12-21T09:25:13.661994-05:00","created_by":"daemon","metadata":"{}"}]}
{"id":"CoinSite-ez5","title":"Fix collection delete button not working","description":"When creating a test collection and then trying to delete it, the delete button appears to do nothing.\n\nRoot cause: Two issues:\n1. The DELETE API endpoint /admin/api/collections/[id] did not exist\n2. The deleteCollection JS function was not globally accessible due to Astro's script processing\n\nFix:\n- Created src/pages/admin/api/collections/[id].ts with cascading delete (Images → Coins → Collection)\n- Added is:inline to script tag in collections/index.astro\n\nCommits: dfcc6b7, e633c08","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T08:35:46.89037-05:00","updated_at":"2025-12-21T08:45:48.527349-05:00","closed_at":"2025-12-21T08:40:09.918603-05:00","close_reason":"Added DELETE API endpoint at /admin/api/collections/[id].ts - commit dfcc6b7"}
{"id":"CoinSite-gp8","title":"Create migration script to upload existing images to Vercel Blob","description":"Create a script that:\n1. Scans public/images/coins/ and public/images/collections/ for existing images\n2. Uploads each image to Vercel Blob storage\n3. Tracks the blob URLs returned\n4. Updates the database records (Coins.primaryImage, Collections.thumbnail, Images.filename) with the new blob URLs\n5. Provides a report of migrated images\n\nThis will migrate all existing git-committed images to Blob storage for consistency.","status":"closed","priority":1,"issue_type":"task","created_at":"2025-12-21T09:25:00.812272-05:00","updated_at":"2025-12-21T09:31:06.702481-05:00","closed_at":"2025-12-21T09:31:06.702481-05:00","close_reason":"Migration complete: 103 images uploaded to Vercel Blob, database updated"}
{"id":"CoinSite-gym","title":"Create shared form components","description":"Admin pages duplicate form markup extensively. Need reusable form components.\n\n**Components to create:**\n- FormInput - text/email/password input with label and error handling\n- FormTextarea - textarea with label\n- FormSelect - dropdown select\n- FormButton - styled submit/action buttons\n- FormGroup - wrapper for form field groups\n\n**Files with duplicated form code:**\n- src/pages/admin/coins/new.astro\n- src/pages/admin/coins/edit/[id].astro\n- src/pages/admin/collections/new.astro\n- src/pages/admin/collections/edit/[id].astro\n- src/pages/admin/blog/new.astro","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T08:31:26.52166-05:00","updated_at":"2025-12-20T11:09:47.328135-05:00","closed_at":"2025-12-20T11:09:47.328135-05:00","close_reason":"Added FormInput, FormTextarea, FormSelect, Alert, and Button components","labels":["refactor","ui"]}
{"id":"CoinSite-hfw","title":"Make collection level images show in full","status":"open","priority":2,"issue_type":"task","created_at":"2026-01-03T05:45:38.579846-05:00","created_by":"wjs","updated_at":"2026-01-03T05:45:38.579846-05:00"}
{"id":"CoinSite-ht7","title":"Fix session cleanup logic bug in auth.ts","description":"The cleanExpiredSessions() function in src/lib/auth.ts:111 uses eq() instead of lt() operator. This means expired sessions are NEVER cleaned up. Sessions will accumulate indefinitely, creating security risk and database bloat.\n\n**Current (broken):**\n```typescript\nawait db.delete(AdminSessions).where(eq(AdminSessions.expiresAt, now));\n```\n\n**Fix:**\n```typescript  \nawait db.delete(AdminSessions).where(lt(AdminSessions.expiresAt, now));\n```\n\nImport `lt` from astro:db alongside existing imports.","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T08:29:30.943013-05:00","updated_at":"2025-12-20T10:49:59.335775-05:00","closed_at":"2025-12-20T10:49:59.335775-05:00","close_reason":"Fixed: changed eq to lt in cleanExpiredSessions function","labels":["critical","security"]}
{"id":"CoinSite-jgo","title":"Can't delete images from the images section","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T05:45:38.206371-05:00","created_by":"wjs","updated_at":"2026-01-03T05:51:31.774261-05:00","closed_at":"2026-01-03T05:51:31.774261-05:00","close_reason":"Fixed in this commit"}
{"id":"CoinSite-l8q","title":"Set Titus Colosseum Aureus as favicon","description":"Replace the current favicon with the Titus Colosseum Aureus coin image for better branding.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:45:45.736313-05:00","updated_at":"2025-12-21T10:47:07.655847-05:00","closed_at":"2025-12-21T10:47:07.655847-05:00","close_reason":"Created favicon.png (32x32) and apple-touch-icon.png (180x180) from Titus Colosseum Aureus image. Updated BaseHead.astro to use PNG favicon."}
{"id":"CoinSite-lir","title":"Add deployment health check script to vercel-deploy-debug skill","description":"Added TypeScript script (deployment-health-check.ts) that automates post-deployment verification:\n- Fetches latest Vercel deployment\n- Checks deployment status (Ready/Error/Building)\n- Scans build logs for errors\n- Scans runtime logs for errors\n- Tests key pages on lordmarcovan.com (/, /coins, /collections, /blog, /about)\n- Outputs color-coded pass/warn/fail results\n\nUsage: npx tsx .claude/skills/vercel-deploy-debug/scripts/deployment-health-check.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T08:14:04.718006-05:00","updated_at":"2025-12-21T08:14:12.872453-05:00","closed_at":"2025-12-21T08:14:12.872453-05:00","close_reason":"Completed in session - commits 7a99247 and 8453bb6"}
{"id":"CoinSite-log","title":"Fix login page: remove demo credentials and fix cookie redirect","description":"Two issues with login page:\n\n1. Demo credentials were displayed publicly (security risk)\n2. Login didn't work because Astro.redirect() creates a new Response object, \n   losing the Set-Cookie header that was set on Astro.response\n\n**Fix:**\n- Removed demo credentials div and associated CSS\n- Changed redirect to use new Response() with both Location and Set-Cookie headers","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T09:57:09.313527-05:00","updated_at":"2025-12-20T09:57:14.755678-05:00","closed_at":"2025-12-20T09:57:14.755678-05:00","close_reason":"Fixed cookie redirect and removed demo credentials","labels":["security"]}
{"id":"CoinSite-m7q","title":"Implement rate limiting on authentication endpoints","description":"There is no rate limiting on the login endpoint, allowing unlimited password attempts. This makes the system vulnerable to brute-force attacks.\n\n**Implementation options:**\n1. Use a rate limiting middleware (e.g., express-rate-limit pattern)\n2. Track failed attempts per IP in the database\n3. Implement exponential backoff after failed attempts\n4. Consider account lockout after N failed attempts\n\n**Endpoints to protect:**\n- POST /admin/login\n- POST /admin/api/create-admin","status":"closed","priority":1,"issue_type":"feature","created_at":"2025-12-20T08:29:43.1659-05:00","updated_at":"2025-12-20T10:53:07.013202-05:00","closed_at":"2025-12-20T10:53:07.013202-05:00","close_reason":"Implemented in-memory rate limiting on login endpoint","labels":["security"]}
{"id":"CoinSite-mf6","title":"Update font for site to Georgia font","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-21T09:36:17.70425-05:00","updated_at":"2025-12-21T10:15:28.179049-05:00","closed_at":"2025-12-21T10:15:28.179049-05:00","close_reason":"Closed"}
{"id":"CoinSite-mvf","title":"Fix coin detail page layout - main image and details placement","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T05:45:40.94706-05:00","created_by":"wjs","updated_at":"2026-01-03T05:51:31.778858-05:00","closed_at":"2026-01-03T05:51:31.778858-05:00","close_reason":"Fixed in this commit"}
{"id":"CoinSite-n6h","title":"Remove db.sqlite from git tracking","description":"The SQLite database file (db.sqlite) is tracked in git and contains sensitive data including password hashes. This is a security vulnerability.\n\n**Steps to fix:**\n1. Add db.sqlite to .gitignore\n2. Remove from git tracking: `git rm --cached db.sqlite`\n3. Commit the .gitignore change\n4. Document how to seed a fresh database for new developers","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T08:29:38.553959-05:00","updated_at":"2025-12-20T09:14:31.171468-05:00","closed_at":"2025-12-20T09:14:31.171468-05:00","close_reason":"Added db.sqlite to .gitignore and removed from git tracking","labels":["critical","security"]}
{"id":"CoinSite-nqy","title":"Admin can't delete image from collection top level","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-01-03T05:45:37.829688-05:00","created_by":"wjs","updated_at":"2026-01-03T05:51:31.76709-05:00","closed_at":"2026-01-03T05:51:31.76709-05:00","close_reason":"Fixed in this commit"}
{"id":"CoinSite-p70","title":"Import lordmarcovan coin collection (~127 coins)","description":"Import coins from lordmarcovan's collection (collectivecoin.com/lordmarcovan) into CoinSite. Includes ~127 new coins across multiple categories: Roman Twelve Caesars (11), other Roman (6), Greek (8), Medieval (14), Byzantine (1), US Coins (32), World Coins (55). See COIN_IMPORT_PLAN.md for full details. Key challenges: image acquisition (site is JS-rendered), collection restructuring needed.","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T16:17:08.738127-05:00","updated_at":"2025-12-20T18:13:29.599371-05:00","closed_at":"2025-12-20T18:13:29.599371-05:00","close_reason":"Imported 68 coins (14 Roman Twelve Caesars + 54 World Coins) with 67 images from CoinTalk forum posts. Added 2 new collections. Total: 84 coins, 123 images, 12 collections."}
{"id":"CoinSite-r1t","title":"Fix image picker not loading images from Vercel Blob","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T10:10:27.686542-05:00","updated_at":"2025-12-21T10:11:18.703905-05:00","closed_at":"2025-12-21T10:11:18.703905-05:00","close_reason":"Fixed wrong cookie name in auth check (session -\u003e admin_session)"}
{"id":"CoinSite-rlc","title":"Extract CSS to design system or Tailwind","description":"Every component has massive inline `\u003cstyle\u003e` blocks (100+ lines each). This leads to:\n- Duplicated color values and spacing rules\n- No consistent design system\n- Difficult maintenance\n\n**Options:**\n1. **Tailwind CSS** - Add via `npx astro add tailwind`\n2. **CSS Modules** - Use scoped CSS files\n3. **Design tokens** - Extract colors, spacing, typography to CSS variables\n\n**Files with large style blocks:**\n- src/components/CoinSlideshow.astro (~200 lines)\n- src/pages/admin/login.astro (~150 lines)\n- src/pages/index.astro (~160 lines)\n- Most admin pages (100+ lines each)","status":"closed","priority":2,"issue_type":"chore","created_at":"2025-12-20T08:31:17.940325-05:00","updated_at":"2025-12-20T11:06:50.135289-05:00","closed_at":"2025-12-20T11:06:50.135289-05:00","close_reason":"Added Tailwind CSS with design system tokens","labels":["refactor","ui"]}
{"id":"CoinSite-sl9","title":"Add inline upload to edit pages","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T10:27:11.479962-05:00","updated_at":"2025-12-21T10:27:16.30412-05:00","closed_at":"2025-12-21T10:27:16.30412-05:00","close_reason":"Updated collection and coin edit pages to use ImageUploadField component. Now users can drag \u0026 drop or upload new images directly from the edit pages, not just browse existing ones."}
{"id":"CoinSite-txh","title":"Fix Vercel deployment - astro.config.mjs was gitignored","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-21T07:18:14.01932-05:00","updated_at":"2025-12-21T07:18:24.376143-05:00","closed_at":"2025-12-21T07:18:24.376143-05:00","close_reason":"Fixed: *.mjs in .gitignore was blocking astro.config.mjs from being deployed. Removed the pattern and added the config file to git."}
{"id":"CoinSite-u34","title":"Add rich text support for coin descriptions","description":"## Problem\nCoin descriptions are currently plain text, making it impossible to:\n- Add hyperlinks to external resources (auction records, reference materials, grading services)\n- Format text with bold or italics for emphasis\n- Create structured content with lists or paragraphs\n\n## Options to Consider\n\n### Option 1: Markdown Support\n- Store descriptions as Markdown in the database\n- Render with a Markdown parser on display\n- Pros: Simple storage, familiar syntax for technical users\n- Cons: May be unfamiliar to non-technical users\n\n### Option 2: HTML Support\n- Store raw HTML in the database\n- Sanitize on input/output for security\n- Pros: Maximum flexibility\n- Cons: Security risks, harder to author\n\n### Option 3: Limited Rich Text Editor (WYSIWYG)\n- Use a lightweight editor like Tiptap, Quill, or TinyMCE\n- Store as HTML or JSON\n- Pros: User-friendly, visual editing\n- Cons: Adds JavaScript dependency, more complex implementation\n\n## Recommended Approach\nA lightweight WYSIWYG editor with limited formatting options (bold, italic, links, lists) would provide the best user experience while keeping complexity manageable. Markdown could be a simpler alternative if the user base is comfortable with it.\n\n## Implementation Notes\n- Database schema may need migration if field type changes\n- Need to sanitize any HTML output to prevent XSS\n- Admin interface will need the editor component\n- Public display pages need to render rich content safely","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-01-01T05:27:55.315272-05:00","created_by":"wjs","updated_at":"2026-01-01T05:33:26.69573-05:00","closed_at":"2026-01-01T05:33:26.69573-05:00","close_reason":"Implemented markdown support for coin descriptions using the existing marked library. Changes: 1) Display page now renders markdown with styled output (links, bold, lists), 2) Admin edit/new forms include markdown hints."}
{"id":"CoinSite-vrc","title":"Change 'Our Collections' to just 'Collections'","status":"open","priority":3,"issue_type":"task","created_at":"2026-01-03T05:45:39.389079-05:00","created_by":"wjs","updated_at":"2026-01-03T05:45:39.389079-05:00"}
{"id":"CoinSite-wsm","title":"Fix collection card images not showing on home page","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-21T19:06:21.793042-05:00","updated_at":"2025-12-21T19:06:29.180755-05:00","closed_at":"2025-12-21T19:06:29.180755-05:00","close_reason":"Fixed by using getImageUrl() helper for blob storage URLs"}
{"id":"CoinSite-x1d","title":"Modernize site styling with coin collector design inspiration","description":"Improve the overall visual design of the site to look more modern and appealing.\n\n## Research Phase\n1. Review Astro documentation for styling best practices and component patterns\n2. Scan the web for well-designed numismatic/coin collecting websites for inspiration\n3. Identify common design patterns in successful coin sites (galleries, grids, detail pages)\n\n## Implementation\n- Update color palette and typography for a more premium feel\n- Improve card layouts for coin displays\n- Enhance image presentation (lightboxes, zoom, galleries)\n- Modernize navigation and header/footer\n- Add subtle animations and transitions\n- Ensure mobile responsiveness\n\n## Reference Sites to Analyze\n- Major auction house sites (Heritage, Stack's Bowers)\n- Collector community sites\n- Modern e-commerce coin dealers\n- Numismatic society websites","status":"closed","priority":2,"issue_type":"feature","created_at":"2025-12-20T11:18:38.062954-05:00","updated_at":"2025-12-20T15:06:33.130016-05:00","closed_at":"2025-12-20T15:06:33.130016-05:00","close_reason":"Closed"}
{"id":"CoinSite-zkq","title":"Create vercel-deploy-debug skill for CoinSite","description":"Created project-specific skill documenting Vercel deployment debugging workflow. Includes:\n- Diagnostic workflow using vercel CLI commands (ls, inspect, logs, env)\n- Common errors and solutions (NoAdapterInstalled, libsql native module, cache issues)\n- Project-specific configuration for Astro 5 + Vercel SSR\n- Quick reference table of CLI commands\n- References file with detailed error messages and stack traces\n\nSkill location: .claude/skills/vercel-deploy-debug/","status":"closed","priority":2,"issue_type":"task","created_at":"2025-12-21T08:14:04.416737-05:00","updated_at":"2025-12-21T08:14:12.871007-05:00","closed_at":"2025-12-21T08:14:12.871007-05:00","close_reason":"Completed in session - commits 7a99247 and 8453bb6"}
{"id":"CoinSite-zto","title":"Fix admin authentication redirect not working","description":"The requireAuth middleware was returning a Response object for redirects, but the admin pages weren't handling it properly. The redirect was being returned but not actually executed, allowing unauthenticated access to all admin pages.\n\n**Fix:**\n- Added isRedirect() type guard to authMiddleware.ts  \n- Updated all 10 admin pages to check for redirect response and return it\n- Pattern: `if (isRedirect(authResult)) return authResult;`\n\n**Files changed:**\n- src/lib/authMiddleware.ts\n- All files in src/pages/admin/","status":"closed","priority":0,"issue_type":"bug","created_at":"2025-12-20T09:32:15.622565-05:00","updated_at":"2025-12-20T09:32:22.572571-05:00","closed_at":"2025-12-20T09:32:22.572571-05:00","close_reason":"Fixed redirect handling in all admin pages","labels":["security"]}
