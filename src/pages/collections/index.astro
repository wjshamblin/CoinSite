---
// Collections index page - shows thumbnail gallery of all collections
import Layout from '../../layouts/Layout.astro';
import { Image } from 'astro:assets';
import { db, Collections } from 'astro:db';

const collections = await db.select().from(Collections);
---

<Layout title="Coin Collections">
	<main>
		<h1>Coin Collections</h1>
		<div class="collections-grid">
			{collections.map((collection) => (
				<a href={`/collections/${collection.slug}`} class="collection-card">
					<Image
						src={`/images/collections/${collection.thumbnail}`}
						alt={collection.name}
						width={400}
						height={200}
						class="collection-thumbnail"
						loading="lazy"
					/>
					<h2>{collection.name}</h2>
					<p>{collection.description}</p>
				</a>
			))}
		</div>
	</main>
</Layout>

<style>
	.collections-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
		gap: 2rem;
		margin: 2rem 0;
	}

	.collection-card {
		text-decoration: none;
		border: 1px solid #ddd;
		border-radius: 8px;
		padding: 1rem;
		transition: transform 0.2s, box-shadow 0.2s;
		color: inherit;
	}

	.collection-card:hover {
		transform: translateY(-5px);
		box-shadow: 0 4px 20px rgba(0,0,0,0.1);
	}

	.collection-thumbnail {
		width: 100%;
		height: 200px;
		object-fit: cover;
		border-radius: 4px;
		margin-bottom: 1rem;
	}

	.collection-card h2 {
		margin: 0.5rem 0;
		color: #333;
	}

	.collection-card p {
		color: #666;
		line-height: 1.4;
	}
</style>